<header>
	<h1>Giving Users the Option of Viewing the Desktop Version of your Responsive Site</h1>
</header>

<p>
	A common practice for mobile websites has been to give the user an option view the full desktop site, often through a link on the footer.
</p>

<p>
	This works well when they are actually separate sites, with different urls.  For example, http://m.facebook.com and http://www.facebook.com.	With responsive design however, there is only one url (which is awesome), and the stylesheet is reformatting the site based on screen resolution rather than serving completely different pages.  Since there is no separate URL to point them to, how do we give our users the option of the "desktop view" within a responsive design?
</p>

<p>
	There are three steps we need to take:
</p>

<ol>
	<li>
		<a href="#stylesheets">Generate two stylesheets - one with media queries, one without.</a>
	</li>
	<li>
		<a href="#set_cookie">Set a cookie when the user clicks a link to keep the choice persistent throughout the rest of our site.</a>
	</li>
	<li>
		<a href="#retrieve_cookie">Retrieve the cookie and use it's value to decide what stylesheets and other content (javascript, images, etc.) to serve.</a>
	</li>
</ol>

<section id="stylesheets">
	<h2>Step 1:  Generate 2 stylesheets - one with media queries, one without.</h2>

	<p>
		Unless you're using a <a href="https://github.com/scottjehl/Respond" rel="external">shiv</a>, you may be doing this anyway for IE8 and below. The payoffs for those IE users are that you don't need to rely on javascript, you load 1 less resource, and can avoid some pesky bugs. Using SASS or LESS, it's not much extra work to generate an additional media query-free file. 
	</p>
	<p>
		Here's a SASS example.  There are a few ways you can do this, ultimately you just need to end up with one CSS file that includes media queries, and one CSS file that doesn't / contains formatting for the desktop view.
	</p>

	<h3>For a Mobile-First Technique:</h3>

	1 main .scss file
	1 _mediaqueries partial
	1 tablet .scss
	1 desktop .scss file

	- run through the export process.

	<p>
		Lovely, now we have two stylesheets, one with media queries and one without.
	</p>

</section>

<section id="set_cookie">
	<h2>Step 2: Set a cookie if the user wants to change views.</h2>

	<p>
		We'll make two links in our footer, one for mobile and one for desktop.
	</p>

	<script src="http://gist-it.appspot.com/github/serostar/desktop_version_for_responsive_sites/raw/master/includes/footer_links.php"></script>

	<p>
		Now let's build set_cookie.php:
	</p>

	<script src="http://gist-it.appspot.com/github/serostar/desktop_version_for_responsive_sites/raw/master/set_cookie.php"></script>

</section>


<section id="retrieve_cookie">
	<h2>Step 3: Retrieve the cookie and serve different stylesheets / other assets.</h2>

	<p>
		In the previous section we set a cookie and redirected back to the page they clicked the footer link from.  So now within the head section of all of the pages on our site, we'll include some PHP to read the cookie and serve the appropriate stylesheet.
	</p>

	<h3>Stylesheets</h3>

	<h4>Within the head section...</h4>

	<script src="http://gist-it.appspot.com/github/serostar/desktop_version_for_responsive_sites/raw/master/includes/stylesheets.php"></script>

	<p>
		At this point, the users are nowing seeing the desktop layout from the stylesheet if they selected the desktop view.  But what if your site also uses javascript, possibly to set different interactions or load different scripts for different screen sizes?  Since the screen size is still small, we'll need to tell javascript what the user really wants.
	</p>

	<h3>JavaScript, Images, and other bits.</h3>

	<p>
		Throughout the rest of the page we now have a php variable which we can run contitionals against, "$view_option".  Some responsive sites load or execute different javascript depending on device width.  Since the device width remains unchanged, but the user wants the full enchilada, we can test against $view_option to load desktop assets as needed.
	</p>

</section>


<section>
	<h2>Potential Issues</h2>
	<p>
		It's possible for the user to have cookies disabled. Clicking the link would have no effect.
	</p>
	<p>
		Caching.  If you're making static caches of the entire page, things will bork.  Make sure the head section, the footer links, and any areas that check against $view_option aren't cached.
</section>